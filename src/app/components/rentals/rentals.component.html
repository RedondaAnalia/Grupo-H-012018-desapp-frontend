<div class="d-flex flex-row justify-content-between main-container fadeIn animated">
  <h1 *ngIf="url==='/alquileresDeOtrosAutos'"> Alquileres que me aprobaron </h1>
  <h1 *ngIf="url==='/alquileresDeMisAutos'"> Alquileres que aprobe </h1>
</div>
<hr>

<div class="main-container alert alert-light text-center" role="alert" *ngIf="rentals?.length === 0">
  No se encontraron alquileres.
</div>

<div *ngFor="let r of rentals, let i=index">
  
  <div class="card" style="width: 18rem;">
    <img class="card-img-top" [src]="r.reservation.post.vehicle.photos[0]" alt="Loading...">
    <div class="card-body d-flex flex-column">
        <label class="d-flex justify-content-center" *ngIf="r.rentalState=== 'FinalizedRental'">
            <span class="badge badge-success">
                <i class="fas fa-check"></i>
                Finalizado</span>
        </label>
        <label class="d-flex justify-content-center" *ngIf="r.rentalState=== 'ConfirmedByTheOwner' && url=== '/alquileresDeMisAutos'">
          <span class="badge badge-warning">
              <i class="fas fa-clock"></i>
              Esperando confirmacion de retiro de cliente...
          </span>
        </label>
        <label class="d-flex justify-content-center" *ngIf="r.rentalState=== 'ReturnConfirmedByTheOwner'  && url=== '/alquileresDeMisAutos'">
          <span class="badge badge-warning">
              <i class="fas fa-clock"></i>
            Esperando confirmacion de retorno de cliente...
          </span>
        </label>
        <label class="d-flex justify-content-center" *ngIf="r.rentalState=== 'ConfirmedByTheTenant' && url==='/alquileresDeOtrosAutos'">
          <span class="badge badge-warning">
              <i class="fas fa-clock"></i>
            Esperando confirmacion de retiro del dueño...
          </span>
        </label>
        <label class="d-flex justify-content-center" *ngIf="r.rentalState=== 'ReturnConfirmedByTheTenant' && url==='/alquileresDeOtrosAutos'">
          <span class="badge badge-warning">
              <i class="fas fa-clock"></i>
            Esperando confirmacion de retorno del dueño...
          </span>
        </label>

       
        
      <h5 class="card-title text-center" *ngIf="r.reservation.reservationSinceDate === r.reservation.reservationUntilDate ">{{r.reservation.reservationSinceDate}}</h5>
      <h5 class="card-title text-center" *ngIf="r.reservation.reservationSinceDate !== r.reservation.reservationUntilDate ">{{r.reservation.reservationSinceDate}} a {{r.reservation.reservationUntilDate}} </h5>
      <div class="d-flex flex-column">
          <label>
              <i class="fas fa-car"></i>
              <strong>
                {{r.reservation.post.vehicle.type}} 
              </strong>  
              para {{r.reservation.post.vehicle.capacity}}
          </label>
          <label>
              <i class="fas fa-hand-holding-usd"></i>
              <strong>
                Costo:         
              </strong>
              {{cost[i] | currency}}  
          </label>   
      </div>
      <ul class="list-group list-group-flush">
          <li *ngIf = "url==='/alquileresDeOtrosAutos'" class="list-group-item">
            <a class="card-link btn" (click)="verDatosDuenio(r)">
                <i class="fas fa-search"></i> Ver datos dueño...</a>
          </li>
          <li *ngIf = "url==='/alquileresDeMisAutos'" class="list-group-item">
            <a class="card-link btn" (click)="verDatosCliente(r)">
                <i class="fas fa-search"></i> Ver datos cliente...</a>
          </li>
        </ul>
      <div class="card-text">
        <!--Botonera!!!!!-->
        <!--OWNER-->
          <div class="" *ngIf="url=== '/alquileresDeMisAutos'">
              <button *ngIf="(r.rentalState=== 'PendingRental') || (r.rentalState==='ConfirmedByTheTenant') " class="btn btn-success" (click)="confirmCarPickUpOwner(r.id,idx)">Confirmar retiro</button>
             
              <div *ngIf="(r.rentalState=== 'PendingReturnRental') || (r.rentalState==='ReturnConfirmedByTheTenant') ">
                  <form [formGroup]="forma" class="form" (ngSubmit)="confirmReturnCarOwner(r.id,idx)">
                    <neutron-rating class="px-2 text-center" (ratingClicked)='onRatingClicked($event)' [rating]="3" [starColour]="'#FDD835'" [starSize]="2"></neutron-rating>
                    <small class="form-text text-muted btn-right">*Obligatorio</small> 
                    <label>Inserte un comentario:</label>
                    <input formControlName="comment" class="form-control">
                    <small class="form-text text-muted btn-right">*Obligatorio</small> 
                    <button type="submit" class="btn btn-success">Confirmar devolucion</button>
                  </form>
              </div>
              
          </div>
          
          <!--Tenant-->
          <div class=""  *ngIf="url==='/alquileresDeOtrosAutos'">
              <button *ngIf="(r.rentalState==='PendingRental') || (r.rentalState==='ConfirmedByTheOwner') " class="btn btn-success" (click)="confirmCarPickUpTenant(r.id,idx)">Confirmar retiro</button>
              <div *ngIf="(r.rentalState=== 'PendingReturnRental') || (r.rentalState==='ReturnConfirmedByTheOwner') ">
                  <form [formGroup]="forma" class="form" (ngSubmit)="confirmReturnCarTenant(r.id,idx)">
                      <neutron-rating class="px-2 text-center" (ratingClicked)='onRatingClicked($event)' [rating]="3" [starColour]="'#FDD835'" [starSize]="2"></neutron-rating>
                      <small class="form-text text-muted btn-right">*Obligatorio</small> 
                      <label>Inserte un comentario:</label>
                      <input formControlName="comment" class="form-control">
                      <small class="form-text text-muted btn-right">*Obligatorio</small> 
                      <button type="submit" class="btn btn-success">Confirmar devolucion</button>
                    </form>
              </div>
              
            </div>
          <!--FIN BOTONERA-->
        </div>
  </div>
</div>

<!-- Modal -->
  <div class="modal fade" id="personalData" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalCenterTitle">{{usuario.name}} {{usuario.surname}}</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body d-flex flex-column">
           <label class="px-3"> 
              <i class="fas fa-map-marker-alt"></i> {{usuario.address}}
           </label>             
           <label class="px-3">
              <i class="fas fa-at"></i> {{ usuario.email}}
           </label>
           <label class="px-3">
              <i class="fas fa-phone"></i> {{reservationModal.reservation.post.phone}}
           </label>
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


  
  
  
  
  
  
  

  